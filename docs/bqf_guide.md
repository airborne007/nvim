# nvim-bqf (Better QuickFix) 使用指南

`nvim-bqf` 是一个对 Neovim 原生 Quickfix 窗口进行极大增强的插件。它不仅提供了代码预览功能，还让 Quickfix 列表变成了一个可以筛选、过滤和批量操作的工作区。

## 1. 基础功能：预览 (Preview)

当你打开 Quickfix 窗口（例如通过 `gr` -> `Alt+q` -> `<leader>qf`，或 `:copen`）时：

*   **自动预览**：移动光标，右侧（或上方）会自动显示对应行的代码上下文。
*   **手动切换**：按 `p` 键可以手动开启/关闭预览窗口。
*   **滚动预览**：
    *   `<C-u>`：在预览窗口向上滚动。
    *   `<C-d>`：在预览窗口向下滚动。
    *   *注意：无需离开 Quickfix 列表即可滚动预览内容。*

## 2. 核心功能：列表筛选与精简 (Filter & Refine)

这是 `bqf` 最强大的功能，适合从海量搜索结果中提取你关心的内容。

### 2.1 标记模式 (Sign)
在 Quickfix 列表中：
*   **`<Tab>`**：标记/取消标记当前行。
*   **`<S-Tab>`** (Shift+Tab)：反向标记（通常也是标记/取消标记，取决于终端配置）。
*   标记的行行首会有符号提示。

### 2.2 创建新列表 (Create / Filter)
当你标记了若干行后：
*   **`zn`**：**只保留**被标记的行（创建一个新的 Quickfix 列表，仅包含选中项）。
    *   *场景：从 100 个搜索结果中挑出 5 个需要修改的，按 `zn` 后，列表只剩这 5 个，专注处理。*
*   **`zN`**：**排除**被标记的行（过滤掉选中项）。
    *   *场景：搜索结果包含了很多测试文件或无关引用，标记它们并按 `zN` 剔除，让列表更干净。*

## 3. 模糊搜索 (Fuzzy Search)

如果列表项非常多，不想一个个看：
*   **`zf`**：打开模糊搜索框（依赖 fzf）。
*   输入关键词（如文件名、函数名），列表会实时过滤，只显示匹配项。
*   此功能非常适合在成百上千个引用中快速定位特定文件。

## 4. 历史记录导航

Quickfix 列表是有历史记录的（每次 `:grep` 或 `gr` 都会产生新列表）：
*   **`<`**：切换到上一个 Quickfix 列表。
*   **`>`**：切换到下一个 Quickfix 列表。

## 5. 文件跳转与分屏

*   **`o`** 或 **`<CR>`**：打开当前选中的文件。
*   **`go`**：在预览窗口打开文件（光标留在列表）。
*   **`v`**：垂直分屏打开。
*   **`s`**：水平分屏打开。
*   **`t`**：在新标签页打开。

## 6. 其他快捷键

*   **`q`**：关闭 Quickfix 窗口。
